<nav class="mat-elevation-z2">
  <nav-bar></nav-bar>
</nav>
<div *ngIf="loading">
  <mat-progress-spinner
    mode="indeterminate"
    [value]="100"
    color="primary"
    class="loading-spinner"
  ></mat-progress-spinner>
</div>

<div *ngIf="!loading">
  <header fxHide.lt-md>
    <div [ngStyle.gt-sm]="{ width: '80%', margin: '20px auto' }">
      <div class="back-btn">
        <button
          (click)="backToDetailPage()"
          mat-raised-button
          class="bold"
          style="margin: 20px 0px"
        >
          <mat-icon class="mat-18">arrow_back_ios</mat-icon> {{"Back"|translate}}
        </button>
      </div>
      <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="20px">
        <!-- TODO -->
        <img
          class="title"
          [ngStyle.xs]="{ width: '100%', height: '200px' }"
          [src]="fundraiser.image"
          onerror="this.src='/assets/images/placeholder.png'"
        />
        <div>
          <h2 style="padding: 0px !important; margin: 0px">{{"Edit & Settings"|translate}}</h2>
          <p>{{ fundraiser.title }}</p>
        </div>
      </div>
    </div>
  </header>

  <mat-tab-group
    [disableRipple]="false"
    [style.backgroundColor]="'#fff'"
    style="margin: 40px auto !important; width: 80%; padding: auto"
    [ngStyle.lt-md]="{ width: '98%', margin: '40px auto' }"
    mat-align-tabs="start"
  >
    <mat-tab
      label="{{
        (index === 0
          ? 'Overview'
          : index === 1
          ? 'Photo'
          : index === 2
          ? 'Story'
          : 'Notification') |translate
      }}"
      *ngFor="let tab of tabs; let index = index"
    >
      <div
        *ngIf="index === 0"
        [ngStyle.lt-md]="{ width: '100%', margin: '30px auto' }"
        class="tab-content"
      >
        <overview [fundraiser]="fundraiser"></overview>
      </div>
      <div
        *ngIf="index === 1"
        class="tab-content"
        fxLayout="column"
        fxLayoutAlign="center center"
      >
        <img [src]="fundraiser.image" onerror="this.src='./assets/images/placeholder.png'" width="50%" height="50%" />
        <mat-error *ngIf="errorMessage">{{ errorMessage }}</mat-error>

        <form
          [formGroup]="form"
          fxLayout="column"
          fxLayoutAlign="center center"
        >
          <mat-label for="image">{{"Change photo"|translate }} </mat-label>
          <input
            id="image"
            formControlName="image"
            type="file"
            accept="image/jpeg,image/png,image/gif, image/bmp"
            (change)="onImageChoosen($event)"
          />
          <button
            mat-raised-button
            color="primary"
            (click)="uploadImage()"
          >
            {{"Save change"|translate}}
          </button>
        </form>
      </div>

      <div *ngIf="index === 2" class="tab-content">
        <story fxFlex="100" [fundraiser]="fundraiser"></story>
      </div>

      <div
        *ngIf="index === 3"
        [ngStyle.xs]="{ width: '100%', margin: '30px auto' }"
        class="tab-content radio"
      >
        <p
          style="width: 50%; text-align: justify"
          [ngStyle.lt-md]="{ width: '100%' }"
        >
          Choose how you would like to receive emails when others donate or
          comment on your fundraiser.
        </p>
        <mat-radio-group>
          <mat-radio-button color="primary" value="yes" style="display: block">
            Send me an email for every donation or comment
          </mat-radio-button>
          <mat-radio-button color="primary" value="no" style="display: block">
            Send me a daily highlight of donations and
            comments</mat-radio-button
          >
        </mat-radio-group>
        <button
          mat-raised-button
          color="primary"
          (click)="openAddPhotoOrVedioDialog()"
          class="btn-large"
          style="width: 30% !important"
        >
          {{"Save change"|translate}}
        </button>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
